# y2log-util: Utilities for YaST Logs

_Author: Stefan Hundhammer <shundhammer@suse.com>_

_License: GPL V2_


This contains some scripts for handling and analyzing y2logs as generated by
YaST and the _save_y2logs_ script.

They are provided in the hope that they may be useful, but there is absolutely
no warranty and no support. Use at your own risk.


# The Scripts

## y2log-merge

This merges all the parts of y2logs into one single file, so you no longer have
to deal with `y2log`, `y2log-1.gz`, `y2log-2.gz` etc. separately.

It generates one single file `y2log-full.log` from them.

Usage:

    cd YaST2
    y2log-merge

You will get a new file `y2log-full.log`.


## y2log-split

This splits one y2log (by default `y2log-full.log`) into several parts, one for
each `y2base` call (i.e. YaST start). The resulting files include a numeric
part for the chronological order of invocation and the name of the YaST module
called.

Usage:

    cd YaST2
    y2log-merge
    y2log-split

or

    cd YaST2
    y2log-split y2log

You will get files like

- y2-00-installation.log
- y2-01-menu.log
- y2-02-sw_single.log
- y2-03-repositories.log
- y2-04-repositories.log
- y2-05-repositories.log
- y2-06-repositories.log
- y2-07-dasd.log
- y2-08-dasd.log
- y2-09-dasd.log


## y2log-headers

This shows the headers (the full y2base call) from split logs (that were
created by y2log-split):

    y2log-headers
    
    y2-00-installation.log:  2021-02-26 22:29:37  y2base called with ["installation", "--arg", "initial", "ncurses"]
    y2-01-menu.log:  2021-02-26 17:42:37  y2base called with ["menu", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-02-sw_single.log:  2021-02-26 17:42:40  y2base called with ["sw_single", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-03-repositories.log:  2021-02-26 17:42:52  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-04-repositories.log:  2021-02-26 17:48:14  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-05-repositories.log:  2021-02-26 17:51:45  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-06-repositories.log:  2021-02-26 17:58:07  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-07-dasd.log:  2021-02-26 18:06:22  y2base called with ["dasd", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-08-dasd.log:  2021-02-27 00:07:52  y2base called with ["dasd", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2-09-dasd.log:  2021-02-27 00:11:57  y2base called with ["dasd", "ncurses", "-name", "YaST2", "-icon", "yast"]


## y2log-y2base-calls

This shows y2base calls from the raw (gzipped and not split) y2log and
y2log-[1-9].gz files:

    y2log-y2base-calls
    
    y2log-1.gz:  2021-02-26 22:29:37  y2base called with ["installation", "--arg", "initial", "ncurses"]
    y2log:       2021-02-26 17:42:37  y2base called with ["menu", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-26 17:42:40  y2base called with ["sw_single", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-26 17:42:52  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-26 17:48:14  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-26 17:51:45  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-26 17:58:07  y2base called with ["repositories", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-26 18:06:22  y2base called with ["dasd", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-27 00:07:52  y2base called with ["dasd", "ncurses", "-name", "YaST2", "-icon", "yast"]
    y2log:       2021-02-27 00:11:57  y2base called with ["dasd", "ncurses", "-name", "YaST2", "-icon", "yast"]


## y2log-rm-split-logs

This removes the files created by y2log-split, i.e. all files that match
`y2-[0-9][0-9]*.log`.

Caution: This does not ask for confirmation, it just does it.
